<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Valentine üíñ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&family=Dancing+Script:wght@600&family=Caveat:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="hearts"></div>
    <div class="confetti-container"></div>

    <div id="introScreen">
        <h1>For A Special Lady ‚ù§Ô∏è</h1>
        <p class="textsConfig">Tap to begin</p>
        <button id="enterBtn" onclick="enterSite()">Enter</button>
    </div>

    <audio id="bgMusic" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>
    <audio id="voiceMessage">
        <source src="voice.mp3" type="audio/mpeg">
    </audio>

    <button id="backBtn" onclick="goBack()">‚Üê Back</button>

    <div class="card">
        <h1>Happy Valentine‚Äôs Day üíï</h1>
        <p class="intro">This little page is just for you mama. Every word here comes from my heart.</p>

        <div id="navButtons">
            <button onclick="showSection('us')" class="animated-btn">Tap to see us</button>
            <button onclick="unlockLoveLetter()" class="animated-btn">Love Letter üíå</button>
            <button onclick="showSection('memories')" class="animated-btn">Our memories</button>
            <button onclick="unlockMessage()" class="animated-btn">A message just for you</button>
        </div>

        <div id="us" class="hidden section">
            <img src="Images/us.jpg" alt="Us">
            <div class="sweet-box">
                <p>Every moment with you feels like destiny ‚ù§Ô∏è</p>
            </div>
        </div>

        <div id="memories" class="hidden section">
            <img src="Images/memory1.jpg" alt="Memory 1">
            <img src="Images/memory2.jpg" alt="Memory 2">
        </div>

        <div id="message" class="hidden section">
            <button class="voice-btn" onclick="playVoice()">‚ñ∂ Play My Voice</button>
            <p class="love-note glow-text">
                You are my peace. My happiness. My greatest blessing ‚ù§Ô∏è
            </p>
        </div>

        <div id="loveLetter" class="hidden section">
            <div class="letter-box">
                My Love,<br><br>
                From the moment you came into my life, everything became softer, brighter, better.<br><br>
                You are the calm in my chaos. The smile I never want to lose.<br><br>
                I choose you. Every single time. Forever ‚ù§Ô∏è
            </div>
        </div>
    </div>

    <script>
        /* 1. HEART SYSTEM */
        function createHeart() {
            const heartContainer = document.querySelector(".hearts");
            if (!heartContainer) return;
            const wrapper = document.createElement("div");
            wrapper.classList.add("heart-wrapper");
            const heart = document.createElement("img");
            heart.src = "Images/FallingHeart.jpg"; 
            heart.classList.add("heart-img");
            const size = Math.random() * (60 - 20) + 20; 
            heart.style.width = size + "px";
            wrapper.style.left = Math.random() * 100 + "vw";
            const fallDuration = Math.random() * 3 + 4;
            const swayDuration = Math.random() * 1 + 1;
            wrapper.style.animationDuration = `${fallDuration}s`;
            heart.style.animationDuration = `${swayDuration}s`;
            wrapper.appendChild(heart);
            heartContainer.appendChild(wrapper);
            setTimeout(() => { wrapper.remove(); }, fallDuration * 1000);
        }

        /* 2. HEART BURST EFFECT */
        function createBurst() {
            for (let i = 0; i < 20; i++) {
                const burst = document.createElement("img");
                burst.src = "Images/FallingHeart.jpg";
                burst.classList.add("burst-heart");
                
                // Random directions for the explosion
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 200 + 100;
                const tx = Math.cos(angle) * distance + "px";
                const ty = Math.sin(angle) * distance + "px";
                const rot = Math.random() * 360 + "deg";

                burst.style.setProperty('--tx', tx);
                burst.style.setProperty('--ty', ty);
                burst.style.setProperty('--rot', rot);
                burst.style.width = (Math.random() * 30 + 20) + "px";

                document.body.appendChild(burst);
                setTimeout(() => burst.remove(), 1200);
            }
        }

        /* 3. ENTER SITE (Music + Fullscreen + Burst) */
        function enterSite() {
            // Fullscreen trigger
            const elem = document.documentElement;
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.webkitRequestFullscreen) { /* Safari */
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) { /* IE11 */
                elem.msRequestFullscreen();
            }

            // Burst Effect
            createBurst();

            // Hide intro and play music
            document.getElementById("introScreen").style.display = "none";
            document.getElementById("bgMusic").play();
        }

        window.onload = function() {
            setInterval(createHeart, 800);
        };

        /* NAVIGATION & INTERACTION */
        function showSection(id) {
            document.getElementById("navButtons").style.display = "none";
            document.getElementById("backBtn").style.display = "block";
            document.querySelectorAll(".section").forEach(sec => {
                sec.classList.remove("show");
                sec.style.display = "none";
            });
            let target = document.getElementById(id);
            target.style.display = "block";
            setTimeout(() => { target.classList.add("show"); }, 10);
        }

        function goBack() {
            document.querySelectorAll(".section").forEach(sec => {
                sec.classList.remove("show");
                sec.style.display = "none";
            });
            document.getElementById("navButtons").style.display = "block";
            document.getElementById("backBtn").style.display = "none";
        }

        function launchConfetti() {
            const container = document.querySelector(".confetti-container");
            for(let i=0; i<80; i++) {
                let conf = document.createElement("div");
                conf.classList.add("confetti");
                conf.style.left = Math.random() * 100 + "vw";
                conf.style.backgroundColor = Math.random() > 0.5 ? "#ff004f" : "#ff5fa2";
                conf.style.animationDuration = (Math.random() * 3 + 2) + "s";
                container.appendChild(conf);
                setTimeout(() => { conf.remove(); }, 5000);
            }
        }

 let currentUnlockType = "";

function openPrompt(question, type) {
    currentUnlockType = type;
    document.getElementById("promptTitle").innerText = question;
    document.getElementById("promptInput").value = ""; 
    
    // Show modal without focusing input (keyboard stays hidden)
    const modal = document.getElementById("customPrompt");
    modal.style.display = "flex";
    modal.style.opacity = "0";
    setTimeout(() => { modal.style.opacity = "1"; }, 10);
}

function closePrompt() {
    const modal = document.getElementById("customPrompt");
    modal.style.opacity = "0";
    setTimeout(() => { modal.style.display = "none"; }, 400);
}

// Custom Error Message Function
function showError(message) {
    const toast = document.getElementById("errorToast");
    toast.innerText = message;
    toast.classList.add("show");
    
    // Automatically hide after 2.5 seconds
    setTimeout(() => {
        toast.classList.remove("show");
    }, 2500);
}

function submitPrompt() {
    let answer = document.getElementById("promptInput").value.toLowerCase().trim();
    
    if (currentUnlockType === "letter") {
        if (answer === "instagram") {
            showSection("loveLetter");
            launchConfetti();
            closePrompt();
        } else {
            triggerErrorEffect();
            showError("Try again ‚ù§Ô∏è"); // Custom error instead of alert
        }
    } 
    else if (currentUnlockType === "message") {
        if (answer === "my man") {
            showSection("message");
            launchConfetti();
            closePrompt();
        } else {
            triggerErrorEffect();
            showError("Wrong answer, cutie üòò"); // Custom error instead of alert
        }
    }
}

function triggerErrorEffect() {
            let inputField = document.getElementById("promptInput");
            inputField.classList.add("error-glow");
            setTimeout(() => {
                inputField.classList.remove("error-glow");
            }, 500);
        }

// Update your button clicks to use the new prompt
function unlockLoveLetter() {
    openPrompt("Where did we first talk? üíñ", "letter");
}

function unlockMessage() {
    openPrompt("Who is the best boyfriend in the world? üíï", "message");
}

// Allow "Enter" key to submit the prompt
document.getElementById("promptInput").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
        submitPrompt();
    }
});

        function playVoice() { document.getElementById("voiceMessage").play(); }
    </script>

    <div id="errorToast">Try again, cutie ‚ù§Ô∏è</div>

    <div id="customPrompt">
        <div class="prompt-content">
            <h2 id="promptTitle">Question</h2>
            <input type="text" id="promptInput" placeholder="Tap here to type...">
            <div class="prompt-btns">
                <button class="animated-btn" style="margin:0; width: auto;" onclick="submitPrompt()">Submit</button>
                <button class="animated-btn" style="margin:0; width: auto; background: #7a2c4d;" onclick="closePrompt()">Cancel</button>
            </div>
        </div>
    </div>
</body>
</html>
